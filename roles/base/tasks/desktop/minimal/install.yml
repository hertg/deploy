- name: Install X.org
  package:
    name: 
      - xorg-server
      - xorg-xinit
      - xorg-xrandr
      - xbindkeys
      - xclip
      - xsel
      - xterm
    state: latest

- name: Install LightDM
  package:
    name:
      - lightdm

- name: Enable LightDM
  systemd:
    name: lightdm
    enabled: yes

- name: Check if WM already installed
  stat:
    path: /usr/bin/leftwm
  register: leftwm_stat

- name: Install WM
  become: yes
  become_user: aur_builder
  command: paru -S --cleanafter --skipreview --noprovides --nouseask --noconfirm leftwm
  when: not leftwm_stat.stat.exists
